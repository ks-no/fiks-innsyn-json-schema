{
  "id": "https://api.fiks.ks.no/innsyn/schema/domain/faktura.v1.json",
  "$schema": "https://json-schema.org/draft/2019-09/schema",
  "title": "Innsyn Faktura V1",
  "description": "Melding som beskriver en faktura",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "tittel",
    "fakturaDato",
    "forfallDato",
    "fakturaMottaker",
    "betalesTil",
    "belop",
    "totalbelop"
  ],
  "definitions": {
    "FakturaPdfV1": {
      "type": "object",
      "description": "Tittel og lenke til faktura-PDF",
      "additionalProperties": false,
      "required": [
        "tittel",
        "lenke"
      ],
      "properties": {
        "tittel": {
          "$ref": "../types/string.not.blank.json"
        },
        "lenke": {
          "$ref": "../types/string.not.blank.json"
        }
      }
    },
    "FakturastatusV1": {
      "enum": [
        "BETALT",
        "IKKE_BETALT",
        "PURRING"
      ]
    },
    "FakturaBelopV1": {
      "type": "object",
      "description": "Beløp i norske kroner, oppgitt i kroner og øre",
      "additionalProperties": false,
      "required": [
        "kroner",
        "ore"
      ],
      "properties": {
        "kroner": {
          "type": "integer",
          "minimum": 0
        },
        "ore": {
          "type": "integer",
          "minimum": 0,
          "maximum": 99
        }
      }
    },
    "ForsendelseskanalV1": {
      "enum": [
        "AVTALEGIRO",
        "EFAKTURA",
        "POST",
        "EPOST",
        "DIGIPOST",
        "EBOKS"
      ]
    }
  },
  "properties": {
    "tittel": {
      "$ref": "../types/string.not.blank.json",
      "description": "Forklarende navn på faktura",
      "examples": [
        "Barnehage og SFO",
        "Kommunale avgifter 1. kvartal 2020"
      ]
    },
    "fakturaDato": {
      "type": "string",
      "format": "date",
      "description": "Dato på ISO 8601-format, YYYY-MM-DD",
      "examples": [
        "2020-01-01",
        "2100-12-31"
      ]
    },
    "forfallDato": {
      "type": "string",
      "format": "date",
      "description": "Dato på ISO 8601-format, YYYY-MM-DD",
      "examples": [
        "2020-01-01",
        "2100-12-31"
      ]
    },
    "status": {
      "description": "Status for faktura",
      "$ref": "#/definitions/FakturastatusV1"
    },
    "fakturaMottaker": {
      "$ref": "../types/string.not.blank.json",
      "description": "Navn på mottaker av fakturaen",
      "examples": [
        "Ola Nordmann"
      ]
    },
    "betalesTil": {
      "$ref": "../types/string.not.blank.json",
      "description": "Navn på mottaker av betalingen"
    },
    "belop": {
      "$ref": "#/definitions/FakturaBelopV1",
      "description": "Originalt fakturabeløp uten gebyrer"
    },
    "gebyr": {
      "$ref": "#/definitions/FakturaBelopV1",
      "description": "Purregebyr som kommer i tillegg til originalt fakturabeløp"
    },
    "totalbelop": {
      "$ref": "#/definitions/FakturaBelopV1",
      "description": "Totalbeløp med originalt fakturabeløp og gebyrer"
    },
    "kontonummer": {
      "type": "string",
      "pattern": "^[0-9]+$",
      "description": "Kontonummeret fakturaen skal betales til",
      "examples": [
        "521000539187"
      ]
    },
    "kid": {
      "type": "string",
      "pattern": "^[0-9]+$",
      "description": "KID-nummer for fakturaen",
      "examples": [
        "1843453108003525"
      ]
    },
    "fakturanummer": {
      "$ref": "../types/string.not.blank.json",
      "description": "Fakturanummer for fakturaen"
    },
    "forsendelseskanal": {
      "description": "Kanalen fakturaen ble levert gjennom",
      "$ref": "#/definitions/ForsendelseskanalV1"
    },
    "lenker": {
      "description": "Liste med lenker til PDF for faktura. Original faktura legges først, med eventuelle purringer etter.",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "$ref": "#/definitions/FakturaPdfV1"
      }
    },
    "korrelasjonId": {
      "$ref": "korrelasjon.id.json"
    },
    "forelder": {
      "$ref": "forelder.json"
    }
  }
}