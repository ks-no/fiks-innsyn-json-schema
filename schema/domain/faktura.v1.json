{
  "id": "https://api.fiks.ks.no/innsyn/schema/domain/faktura.v1.json",
  "$schema": "https://json-schema.org/draft/2019-09/schema",
  "title": "Innsyn Faktura V1",
  "description": "Melding som beskriver en faktura",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "tittel",
    "fakturaDato",
    "forfallDato",
    "fakturaMottaker",
    "betalesTil",
    "belop",
    "totalbelop",
    "status"
  ],
  "definitions": {
    "FakturaPdfV1": {
      "type": "object",
      "description": "Url for PDF-faktura",
      "additionalProperties": false,
      "required": [
        "url"
      ],
      "properties": {
        "url": {
          "$ref": "../types/string.not.blank.json"
        }
      }
    },
    "FakturaVedleggV1": {
      "type": "object",
      "description": "Tittel og url for PDF-vedlegg",
      "additionalProperties": false,
      "required": [
        "tittel",
        "url"
      ],
      "properties": {
        "tittel": {
          "$ref": "../types/string.not.blank.json"
        },
        "url": {
          "$ref": "../types/string.not.blank.json"
        }
      }
    },
    "FakturaLenkeV1": {
      "type": "object",
      "description": "Tittel og url for lenke",
      "additionalProperties": false,
      "required": [
        "tittel",
        "url"
      ],
      "properties": {
        "tittel": {
          "$ref": "../types/string.not.blank.json"
        },
        "url": {
          "$ref": "../types/string.not.blank.json"
        }
      }
    },
    "FakturastatusV1": {
      "enum": [
        "BETALT",
        "IKKE_BETALT",
        "INKASSOVARSEL",
        "KORRIGERT",
        "SENDT_INKASSO"
      ]
    },
    "FakturaBelopV1": {
      "type": "object",
      "description": "Beløp i norske kroner, oppgitt i kroner og øre",
      "additionalProperties": false,
      "required": [
        "kroner",
        "ore"
      ],
      "properties": {
        "kroner": {
          "type": "integer",
          "minimum": 0
        },
        "ore": {
          "type": "integer",
          "minimum": 0,
          "maximum": 99
        }
      }
    },
    "FakturaForsendelseskanalV1": {
      "enum": [
        "AVTALEGIRO",
        "EFAKTURA",
        "POST",
        "EPOST",
        "DIGIPOST",
        "EBOKS"
      ]
    },
    "FakturaKontaktinformasjonV1": {
      "type": "object",
      "description": "Kontaktinformasjon",
      "additionalProperties": false,
      "properties": {
        "navn": {
          "$ref": "../types/string.not.blank.json"
        },
        "telefonnummer": {
          "$ref": "../types/string.not.blank.json"
        },
        "epost": {
          "$ref": "../types/string.not.blank.json"
        },
        "fritekst": {
          "$ref": "../types/string.not.blank.json"
        },
        "adresse": {
          "$ref": "adresse.v1.json"
        }
      }
    }
  },
  "properties": {
    "tittel": {
      "$ref": "../types/string.not.blank.json",
      "description": "Forklarende navn på faktura",
      "examples": [
        "Barnehage og SFO",
        "Kommunale avgifter 1. kvartal 2020"
      ]
    },
    "fakturaDato": {
      "type": "string",
      "format": "date",
      "description": "Dato på ISO 8601-format, YYYY-MM-DD",
      "examples": [
        "2020-01-01",
        "2100-12-31"
      ]
    },
    "forfallDato": {
      "type": "string",
      "format": "date",
      "description": "Dato på ISO 8601-format, YYYY-MM-DD",
      "examples": [
        "2020-01-01",
        "2100-12-31"
      ]
    },
    "status": {
      "description": "Status for faktura",
      "$ref": "#/definitions/FakturastatusV1"
    },
    "fakturaMottaker": {
      "$ref": "../types/string.not.blank.json",
      "description": "Navn på mottaker av fakturaen",
      "examples": [
        "Ola Nordmann"
      ]
    },
    "betalesTil": {
      "$ref": "../types/string.not.blank.json",
      "description": "Navn på mottaker av betalingen"
    },
    "belop": {
      "$ref": "#/definitions/FakturaBelopV1",
      "description": "Originalt fakturabeløp uten gebyrer"
    },
    "gebyr": {
      "$ref": "#/definitions/FakturaBelopV1",
      "description": "Purregebyr som kommer i tillegg til originalt fakturabeløp"
    },
    "renter": {
      "$ref": "#/definitions/FakturaBelopV1",
      "description": "Renter som kommer i tillegg til originalt fakturabeløp"
    },
    "andreOmkostninger": {
      "$ref": "#/definitions/FakturaBelopV1",
      "description": "Omkostninger utenom gebyr og renter, som kommer i tillegg til originalt fakturabeløp"
    },
    "totalbelop": {
      "$ref": "#/definitions/FakturaBelopV1",
      "description": "Totalbeløp med originalt fakturabeløp og gebyrer"
    },
    "utestaendeBelop": {
      "$ref": "#/definitions/FakturaBelopV1",
      "description": "Utestående beløp på fakturaen dersom den er delvis betalt"
    },
    "kontonummer": {
      "type": "string",
      "pattern": "^[0-9]+$",
      "description": "Kontonummeret fakturaen skal betales til",
      "examples": [
        "521000539187"
      ]
    },
    "kid": {
      "type": "string",
      "pattern": "^[0-9]+$",
      "description": "KID-nummer for fakturaen",
      "examples": [
        "1843453108003525"
      ]
    },
    "fakturanummer": {
      "$ref": "../types/string.not.blank.json",
      "description": "Fakturanummer for fakturaen"
    },
    "forsendelseskanal": {
      "description": "Kanalen fakturaen ble levert gjennom",
      "$ref": "#/definitions/FakturaForsendelseskanalV1"
    },
    "faktura": {
      "description": "Gjeldende faktura",
      "$ref": "#/definitions/FakturaPdfV1"
    },
    "fakturahistorikk": {
      "description": "Liste med lenker til fakturaer som har blitt erstattet",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "$ref": "#/definitions/FakturaVedleggV1"
      }
    },
    "vedlegg": {
      "description": "Liste med lenker til ekstra PDFer for faktura",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "$ref": "#/definitions/FakturaVedleggV1"
      }
    },
    "lenker": {
      "description": "Liste med lenker",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "$ref": "#/definitions/FakturaLenkeV1"
      }
    },
    "kontaktinformasjon": {
      "description": "Kontaktinformasjon for fakturaavsender",
      "$ref": "#/definitions/FakturaKontaktinformasjonV1"
    },
    "kontaktinformasjonInkasso": {
      "description": "Kontaktinformasjon for inkassoselskap",
      "$ref": "#/definitions/FakturaKontaktinformasjonV1"
    },
    "korrelasjonId": {
      "$ref": "korrelasjon.id.json"
    },
    "forelder": {
      "$ref": "forelder.json"
    }
  }
}